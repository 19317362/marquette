<!DOCTYPE html>

<html lang="en">
  <head>
  	<meta charset="utf-8" />
    <title>Marquette</title>
    <link rel="stylesheet" href="./css/style.css"/>
    <link rel="stylesheet" href="./css/jquery.gridster.min.css"/>

    <script src="./js/jquery-1.10.1.min.js"></script>
    <script src="./js/jquery.gridster.min.js"></script>
  </head>

  <body>

    <div class="gridster">
      <div class="tile" data-row="1" data-col="1" data-sizex="1" data-sizey="1">1</div>
      <div class="tile" data-row="1" data-col="2" data-sizex="1" data-sizey="1">2</div>
      <div class="tile" data-row="1" data-col="3" data-sizex="1" data-sizey="1">3</div>
      <div class="tile" data-row="1" data-col="4" data-sizex="1" data-sizey="1">4</div>
      <div class="tile" data-row="2" data-col="1" data-sizex="1" data-sizey="1">5</div>
      <div class="tile" data-row="2" data-col="2" data-sizex="1" data-sizey="1">6</div>
      <div class="tile" data-row="2" data-col="3" data-sizex="1" data-sizey="1">7</div>
      <div class="tile" data-row="2" data-col="4" data-sizex="1" data-sizey="1">8</div>
      <div class="tile" data-row="3" data-col="1" data-sizex="1" data-sizey="1">9</div>
      <div class="tile" data-row="3" data-col="2" data-sizex="1" data-sizey="1">10</div>
      <div class="tile" data-row="3" data-col="3" data-sizex="1" data-sizey="1">11</div>
      <div class="tile" data-row="3" data-col="4" data-sizex="1" data-sizey="1">12</div>
    </div>
    
    <div id="footer">
      <span>Marquette</span>

      <button id="edit">Edit...</button>
    
    </div>

    <script>
        var columns = 4;
        var rows = 4;
        var min_margin = 6;
    
        $(function(){ //DOM Ready

            function init_gridster()
            {
                var win = $( window );

                var tile_size_x = Math.floor((win.width() - (columns * min_margin * 2) - min_margin) / columns);
                if (tile_size_x % 2 == 1)
                    tile_size_x -= 1;

                var height = win.height() - $('#footer').height();
                var tile_size_y = Math.floor((height - (rows * min_margin * 2) - min_margin) / rows);
                if (tile_size_y % 2 == 1)
                    tile_size_y -= 1;
                  
                var tile_size = Math.min(tile_size_x, tile_size_y);
                var margin_x = Math.floor((win.width() - (tile_size * columns)) / (columns*2));
                var margin_y = Math.floor((height - (tile_size * rows)) / (rows*2));
              
                return $(".gridster").gridster({
                  widget_selector: ".tile",
                  widget_base_dimensions: [tile_size, tile_size],
                  widget_margins: [margin_x, margin_y],
                  min_cols: columns,
                  max_cols: columns
                }).data('gridster');
            }
            
            var gridster = init_gridster();
            
            $("#edit").on("click", function(event) {
              var target = $( event.target );
              if (target.html() == 'Edit...') {
                  $( '.tile' ).addClass('editable');
                  gridster.enable();
                  target.html('Save');
              } else {
                  $( '.tile' ).removeClass('editable');
                  gridster.disable();
                  target.html('Edit...');
              }
            });
            

            $( window ).resize(function() {
                var gridster = $('.gridster').data('gridster');
                if (gridster) {
                    gridster.destroy();
                }
                init_gridster();
            });
 
        });

    </script>

  </body>
</html>
